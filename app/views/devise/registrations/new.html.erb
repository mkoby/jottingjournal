<div class="span6 offset4">
  <h1>Sign up</h1>

  <%= form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => { :class => "form-horizontal" }) do |f| %>
    <%= devise_error_messages! %>

    <h3>User</h3>
    <div class="control-group">
      <%= f.label :email, :class => "control-label" %>
      <div class="controls">
        <%= f.email_field :email %>
      </div>
    </div>

    <div class="control-group">
      <%= f.label :password, :class => "control-label" %>
      <div class="controls">
        <%= f.password_field :password %>
      </div>
    </div>

    <div class="control-group">
      <%= f.label :password_confirmation, :class => "control-label" %>
      <div class="controls">
        <%= f.password_field :password_confirmation %>
      </div>
    </div>

    <%= f.fields_for 'billing' do |b| %>
      <h3>Billing</h3>
      <div class="control-group">
        <%= b.label :credit_card_number, 'Credit Card Number', :class => "control-label" %>
        <div class="controls">
          <%= b.text_field :credit_card_number %>
        </div>
      </div>
      <div class="control-group">
        <%= b.label :credit_card_exp, 'Expires', :class => "control-label" %>
        <div class="controls">
          <%= b.text_field :credit_card_exp_month, :class => "input-mini", :placeholder => Date.today.month %> / 
          <%= b.text_field :credit_card_exp_year, :class => "input-mini", :placeholder => Date.today.year %>
        </div>
      </div>
      <div class="control-group">
        <%= b.label :credit_card_cvc, 'CVC#', :class => "control-label" %>
        <div class="controls">
          <%= b.text_field :credit_card_cvc %>
        </div>
      </div>
    <% end %>
    <h4>
      <small>You have 30 days free. You're billed $36 for the year on day 31.</small>
    </h4>

    <div class="control-group">
      <div class="controls">
        <%= f.submit "Sign up", :class => "btn btn-large btn-inverse", :id => "user_submit" %>
      </div>
    </div>
  <% end %>
</div>

<%= content_for :javascript do %>
  Stripe.setPublishableKey("<%= "#{ENV['STRIPE_API_KEY_PUBLIC']}" %>");
<% end %>
